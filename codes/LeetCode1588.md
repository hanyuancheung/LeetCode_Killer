# LeetCode 第 1588 号问题：所有奇数长度子数组的和

**from zhanghanyuan**

题目来源于 LeetCode 上第 1588 号问题：所有奇数长度子数组的和。题目难度为 easy.

### 题目描述

给你一个正整数数组 arr ，请你计算所有可能的奇数长度子数组的和。

子数组 定义为原数组中的一个连续子序列。

请你返回 arr 中 所有奇数长度子数组的和 。


**示例1:**

```
输入：arr = [1,4,2,5,3]
输出：58
解释：所有奇数长度子数组和它们的和为：
[1] = 1
[4] = 4
[2] = 2
[5] = 5
[3] = 3
[1,4,2] = 7
[4,2,5] = 11
[2,5,3] = 10
[1,4,2,5,3] = 15
我们将所有值求和得到 1 + 4 + 2 + 5 + 3 + 7 + 11 + 10 + 15 = 58

```

**示例2:**

```
输入：arr = [1,2]
输出：3
解释：总共只有 2 个长度为奇数的子数组，[1] 和 [2]。它们的和为 3 。
```

**示例3:**

```
输入：arr = [10,11,12]
输出：66
```

### 题目解析

对于一个数字，它所在的数组，可以在它前面再选择 0, 1, 2, ... 个数字，一共有 left = i + 1 个选择；

可以在它后面再选择 0, 1, 2, ... 个数字，一共有 right = n - i 个选择。

如果在前面选择了偶数个数字，那么在后面，也必须选择偶数个数字，这样加上它自身，才构成奇数长度的数组；

如果在前面选择了奇数个数字，那么在后面，也必须选择奇数个数字，这样加上它自身，才构成奇数长度的数组；

数字前面共有 left 个选择，其中偶数个数字的选择方案有 left_even = (left + 1) / 2 个，奇数个数字的选择方案有 left_odd = left / 2 个；

数字后面共有 right 个选择，其中偶数个数字的选择方案有 right_even = (right + 1) / 2 个，奇数个数字的选择方案有 right_odd = right / 2 个；

所以，每个数字一共在 left_even * right_even + left_odd * right_odd 个奇数长度的数组中出现过。


### 代码实现

```java
class Solution {
    public int sumOddLengthSubarrays(int[] arr) {
        int n = arr.length;
        int ans = 0;
        for (int i = 0; i < n; i++){
            int leftOddCnt = (i + 1) / 2;                   //左边奇数个元素的情况数量
            int leftDoubleCnt = i / 2 + 1;                  //左边偶数个元素的情况数量
            int rightOddCnt = (n - i) / 2;                  //右边奇数个元素的情况数量
            int rightDoubleCnt = (n - i - 1) / 2 + 1;       //右边偶数个元素的情况数量
            ans += arr[i] * (leftOddCnt * rightOddCnt + leftDoubleCnt * rightDoubleCnt);
        }
        return ans;
    }
}
```

### 结果描述

执行用时：0 ms, 在所有 Java 提交中击败了100.00%的用户

内存消耗：36.6 MB, 在所有 Java 提交中击败了100.00%的用户
